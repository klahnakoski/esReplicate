// A COPY FROM mo_hg.repos.revisions.py
{
	"settings": {
		"index.number_of_replicas": 1,
		"index.number_of_shards": 6,
		"analysis": {
			"analyzer": {
				"description_limit": {
					"type": "custom",
					"tokenizer": "keyword",
					"filter": [
						"lowercase",
						"asciifolding",
						{
							"type": "limit",
							"max": 100,
							"min": 5
						}
					]
				}
			}
		}
	},
	"mappings": {
		"revision": {
			"_source": {
				"compress": false
			},
			"_id": {
				"index": "not_analyzed",
				"type": "string",
				"store": true
			},
			"_all": {
				"enabled": false
			},
			"_routing": {
				"required": true,
				"path": "changeset.id12"
			},
			"dynamic_templates": [
				{
					"default_strings": {
						"mapping": {
							"index": "not_analyzed",
							"type": "string",
							"doc_values": true
						},
						"match_mapping_type": "string",
						"match": "*"
					}
				},
				{
					"default_longs": {
						"mapping": {
							"index": "not_analyzed",
							"type": "long",
							"doc_values": true
						},
						"match_mapping_type": "long",
						"match": "*"
					}
				},
				{
					"default_integers": {
						"mapping": {
							"index": "not_analyzed",
							"type": "long",
							"doc_values": true
						},
						"match_mapping_type": "integer",
						"match": "*"
					}
				}
			],
			"properties": {
				"changeset": {
					"type": "object",
					"properties": {
						"description": {
							"index": "analyzed",
							"type": "string",
							"fields": {
								"raw": {
									"type": "string",
									"analyzer": "description_limit"
								}
							}
						},
						"diff": {
							"type": "nested",
							"dynamic": true,
							"properties": {
								"changes": {
									"type": "nested",
									"dynamic": true,
									"properties": {
										"new": {
											"type": "object",
											"dynamic": true,
											"properties": {
												"content": {
													"type": "string",
													"index": "no"
												}
											}
										},
										"old": {
											"type": "object",
											"dynamic": true,
											"properties": {
												"content": {
													"type": "string",
													"index": "no"
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}
