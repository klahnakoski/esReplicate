// A COPY FROM mo_hg.repos.revisions.py
{
	"settings": {
		"index.number_of_replicas": 1,
		"index.number_of_shards": 6,
		"analysis": {
			"analyzer": {
				"description_limit": {
					"type": "custom",
					"tokenizer": "keyword",
					"filter": [
						"lowercase",
						"asciifolding",
						{
							"type": "limit",
							"max": 100,
							"min": 5
						}
					]
				}
			}
		}
	},
	"mappings": {
		"revision": {
			"_all": {
				"enabled": false
			},
			"properties": {
				"changeset": {
					"type": "object",
					"properties": {
						"description": {
							"index": "analyzed",
							"store": true,
							"type": "string",
							"fields": {
								"raw": {
									"type": "string",
									"analyzer": "description_limit"
								}
							}
						},
						"diff": {
							"type": "nested",
							"dynamic": true,
							"properties": {
								"changes": {
									"type": "nested",
									"dynamic": true,
									"properties": {
										"new": {
											"type": "object",
											"dynamic": true,
											"properties": {
												"content": {
													"store": true,
													"type": "string",
													"index": "no"
												}
											}
										},
										"old": {
											"type": "object",
											"dynamic": true,
											"properties": {
												"content": {
													"store": true,
													"type": "string",
													"index": "no"
												}
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}
